<%= tag.div id: dom_id(todo_item),
    class: "flex items-center gap-3 p-3 bg-white rounded-lg shadow-sm
            border border-gray-100 group" do %>

  <%= button_to toggle_todo_list_todo_item_path(todo_item.todo_list, todo_item),
      method: :patch, class: "flex-shrink-0" do %>
    <div data-checkbox class="w-5 h-5 rounded border-2 flex items-center justify-center
                <%= todo_item.completed? ? 'bg-green border-green' : 'border-gray-300 hover:border-primary' %>">
      <% if todo_item.completed? %>
        <svg class="w-3 h-3 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
        </svg>
      <% end %>
    </div>
  <% end %>

  <div class="flex-1 min-w-0"
       data-controller="inline-edit"
       data-inline-edit-url-value="<%= todo_list_todo_item_path(todo_item.todo_list, todo_item) %>"
       data-inline-edit-field-value="todo_item[description]">

    <span data-inline-edit-target="display"
          data-description
          data-action="dblclick->inline-edit#edit"
          class="text-sm cursor-default block truncate
                 <%= todo_item.completed? ? 'line-through text-gray-400' : 'text-gray-800' %>">
      <%= todo_item.description %>
    </span>

    <% unless todo_item.completed? %>
      <form data-inline-edit-target="form" class="hidden"
            data-action="submit->inline-edit#save">
        <input type="text" value="<%= todo_item.description %>"
               data-inline-edit-target="input"
               data-action="blur->inline-edit#save keydown.escape->inline-edit#cancel"
               class="w-full border border-gray-300 rounded px-2 py-1 text-sm
                      focus:outline-none focus:ring-2 focus:ring-primary">
      </form>
    <% end %>
  </div>

  <%= button_to todo_list_todo_item_path(todo_item.todo_list, todo_item),
      method: :delete,
      class: "opacity-0 group-hover:opacity-100 transition flex-shrink-0" do %>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-coral" fill="none"
         viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M6 18L18 6M6 6l12 12" />
    </svg>
  <% end %>
<% end %>
